<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>My Profile</title>

   <link rel="stylesheet" href="../scss/bootstrap.css">
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

</head>

<body data-bs-theme="dark">

<script>
const token = localStorage.getItem("token");
if(!token) location.href="../auth/login.html";
</script>

<div class="container mt-4 col-md-5">

<h4 class="text-center text-light mb-3">My Profile</h4>

<div class="card mb-4 text-center p-3">
    <img id="avatar" class="rounded-circle mx-auto mb-2" style="width:80px;height:80px;object-fit:cover;">
    <h5 id="name" class="text-light"></h5>
    <small id="lastName" class="text-muted"></small>
</div>

<div class="text-end mb-3">
    <a class="btn btn-primary rounded-circle" href="../article/create_article.html">
        <i class="fa fa-plus"></i>
    </a>
</div>

<div class="row" id="articleList"></div>

</div>

<script src="../js/bootstrap.bundle.min.js"></script>

<script>
const avatarEl = document.getElementById("avatar");
const nameEl = document.getElementById("name");
const lastNameEl = document.getElementById("lastName");
const baseURL = "http://blogs.csm.linkpc.net/api/v1";
fetch(`${baseURL}/auth/profile`, {
    headers:{ Authorization:`Bearer ${token}` }
})
.then(res => res.json())
.then(res => {
    if(res.data){
        nameEl.textContent = res.data.firstName || "";
        lastNameEl.textContent = res.data.lastName || "";
        avatarEl.src = res.data.avatar ;
    }
})

</script>
<script src="profile.js" type="module"></script>
</body>

</html> 